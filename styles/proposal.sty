\RequirePackage{indentfirst}                                    % All subsections indented
\RequirePackage{setspace}                                       % For 1.5 spacing
\RequirePackage{hyperref}                                       % Make table of contents clickable, allow URLs
\RequirePackage[letterpaper, margin=1in]{geometry}              % 1 inch margin, letter paper (American)
\RequirePackage[english]{babel}                                 % For "fancy" quotes
\RequirePackage[autostyle, english=american]{csquotes}          % Same
\RequirePackage{etoolbox}                                       % Misc
\RequirePackage{titlesec}                                       % Modify spacing
\MakeOuterQuote{"}                                              % For fancy quotes
\RequirePackage{times}                                          % For tilde
\RequirePackage{textcomp}                                       % For tilde
\RequirePackage{graphicx}                                       % Images
\RequirePackage{array}                                          % Table spacing
\RequirePackage{ragged2e}                                       % Left align table text
\RequirePackage{caption}                                        % Use to create the \repeatcaption command
\RequirePackage{float}                                          % Image placement
\RequirePackage{fancyhdr}                                       % Header
\RequirePackage[fit]{truncate}                                  % Truncate section names
\RequirePackage{charter}                                        % Charter font
\RequirePackage[acronym]{glossaries}                            % Glossary, acronyms list, etc
\RequirePackage{glossary-mcols}                                 % Multi-column glossary or acronyms list
\RequirePackage{xparse}                                         % Better parsing for macros
\RequirePackage{siunitx}

% Document-wide options
\hypersetup{colorlinks=true,                                % Blue hyperlinks, everything else black
            urlcolor=blue,
            citecolor=black,
            linkcolor=black}
% \titlespacing*{\section}{0pt}{0pt}{0pt}                   % Reduce section header spacing
% \titlespacing*{\subsection}{0pt}{3pt}{0pt}                % Reduce subsection header spacing
% \titlespacing*{\subsubsection}{0pt}{3pt}{-1.5pt}          % Reduce subsubsection header spacing
\renewcommand\familydefault{\sfdefault}                     % Sans serif
\newcommand{\textapprox}{\raisebox{0.1ex}{\texttildelow}}   % Add a ~ character for approximate values
\newcommand{\repeatcaption}[2]{                             % \repeatcaption command for reusing figures
  \renewcommand{\thefigure}{\ref{#1}}
  \captionsetup{list=no}
  \caption{#2 (repeated from page \pageref{#1})}
}

% Header!
\fancyhf{}
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ \scshape#1}}
\fancyhead[L]{\raisebox{-2pt}{\truncate{.4\headwidth}{\footnotesize\rightmark}}}
% \fancyhead[C]{\raisebox{-5pt}{\centering\includegraphics[width=12pt]{images/city.png}}}
\fancyfoot[L]{\raisebox{-2pt}{\footnotesize\textit{Internet Connectivity Proposal}}}
\fancyfoot[R]{\thepage}
\renewcommand{\headrulewidth}{1.5pt}
\renewcommand{\footrulewidth}{0.5pt}
\setlength{\headheight}{15.5pt}

% Macro for acronyms with description
\let\newacronymsaved\newacronym
% \def\?#1{}
\RenewDocumentCommand\newacronym{mmmg}{
    % Fuck all ye who enter here
    \expandafter\newcommand\expandafter{\csname #1\endcsname}[0]{\gls{#1}\,}
    \expandafter\newcommand\expandafter{\csname #1s\endcsname}[0]{\glspl{#1}\,}
    \expandafter\newcommand\expandafter{\csname #2\endcsname}[0]{\Gls{#1}\,}
    \expandafter\newcommand\expandafter{\csname #2s\endcsname}[0]{\Glspl{#1}\,}
    \IfNoValueTF{#4}{
        \newacronymsaved{#1}{#2}{#3}
    } {
        \newglossaryentry{#1}{
                            type=\acronymtype, 
                            name={#2}, 
                            description={#3}, 
                            first={#3 (#2)\glsadd{#1-gls}}, 
                            plural={⟨#2⟩\glspluralsuffix},
                            firstplural={⟨#3⟩\glspluralsuffix\space (⟨#2⟩\glspluralsuffix)},
                            see=[Glossary:]{#1-gls}}
        \newglossaryentry{#1-gls}{name={#2}, description={#4. \textit{See pgs}}}
    }
}

% Some new units
\DeclareSIUnit{\dollar}{\$}
\DeclareSIUnit{\bit}{b}
\DeclareSIUnit{\byte}{B}
